<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Improving Spotify with UMAP v1</title>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />

<link rel="stylesheet" href="/application.a774edfc8322e105ebd5f43fab5b47bebc6b7621f6a7e3e35009dd2070d03d7e.css" integrity="sha256-p3Tt/IMi4QXr1fQ/q1tHvrxrdiH2p&#43;PjUAndIHDQPX4=" />





  

  
  
  
    
  
  

  <link rel="icon" type="image/png" href="/images/site/favicon_hub4bb9182da7b361e7646eed8fc051dd9_71991_42x0_resize_box_3.png" />

<meta property="og:title" content="Improving Spotify with UMAP v1" />
<meta property="og:description" content="Sample post with multiple images, embedded video ect." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Jose-Verdu-Diaz.github.io/posts/projects/spotify/umapv1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-07T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-01-07T00:00:00+00:00" />


    <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Improving Spotify with UMAP v1"/>
<meta name="twitter:description" content="Sample post with multiple images, embedded video ect."/>

    
    
<meta name="description" content="Sample post with multiple images, embedded video ect." />


    

    
        
        
        

        
        

        
        
            <script
            data-goatcounter="https://jose-verdu-diaz.goatcounter.com/count"
            async
            src="//gc.zgo.at/count.js"
            ></script>
        

        
        
        
    




</head>

  <body class="type-posts kind-page" data-spy="scroll" data-target="#TableOfContents" data-offset="80">
    <div class="container-fluid bg-dimmed wrapper">
      
      
    





  


  




  
  
    
  
  



  
  
    
  
  


<nav class="navbar navbar-expand-xl top-navbar final-navbar shadow">
  <div class="container">
      <button class="navbar-toggler navbar-light" id="sidebar-toggler" type="button">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand" href="/">
      
        <img src="/images/site/main-logo_hub4bb9182da7b361e7646eed8fc051dd9_71991_42x0_resize_box_3.png" alt="Logo">
      Jose Verdu-Diaz</a>
    <button class="navbar-toggler navbar-light" id="toc-toggler" type="button">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse lang-selector" id="top-nav-items">
      <ul class="navbar-nav ml-auto">
      
      
        <li class="nav-item dropdown">
<a class="nav-link dropdown-toggle"  href="#" id="themeSelector" role="button"
  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
  <img id="navbar-theme-icon-svg" src="/icons/moon-svgrepo-com.svg" width=20 alt="Dark Theme">
</a>
<div id="themeMenu" class="dropdown-menu dropdown-menu-icons-only" aria-labelledby="themeSelector">
  <a class="dropdown-item nav-link" href="#" data-scheme="light">
    <img class="menu-icon-center" src="/icons/sun-svgrepo-com.svg" width=20 alt="Light Theme">
  </a>
  <a class="dropdown-item nav-link" href="#" data-scheme="dark">
    <img class="menu-icon-center" src="/icons/moon-svgrepo-com.svg" width=20 alt="Dark Theme">
  </a>
  <a class="dropdown-item nav-link" href="#" data-scheme="system">
    <img class="menu-icon-center" src="/icons/computer-svgrepo-com.svg" width=20 alt="System Theme">
  </a>
</div>
</li>

      
      </ul>
    </div>
  </div>
  
  
    <img src="/images/site/main-logo_hub4bb9182da7b361e7646eed8fc051dd9_71991_42x0_resize_box_3.png" class="d-none" id="main-logo" alt="Logo">
  
  
    <img src="/images/site/inverted-logo_hub4bb9182da7b361e7646eed8fc051dd9_71991_42x0_resize_box_3.png" class="d-none" id="inverted-logo" alt="Inverted Logo">
  
</nav>



      
      
  <section class="sidebar-section" id="sidebar-section">
    <div class="sidebar-holder">
      <div class="sidebar" id="sidebar">
        <form class="mx-auto" method="get" action="/search">
          <input type="text" name="keyword" value="" placeholder="Search" data-search="" id="search-box" />
        </form>
        <div class="sidebar-tree">
          <ul class="tree" id="tree">
            <li id="list-heading"><a href="/posts/" data-filter="all">Posts</a></li>
            <div class="subtree">
                
  
  
  
  
    
    
  
  
    
    <li>
      <i class="fas fa-minus-circle"></i><a class="active" href="/posts/projects/">Projects</a>
      
      <ul class="active">
        
  
  
  
  
    
    
  
  
    
    <li>
      <i class="fas fa-minus-circle"></i><a class="active" href="/posts/projects/spotify/">Spotify</a>
      
      <ul class="active">
        
  
  
  
  
    
    
  
  
    
    <li><a class="active" href="/posts/projects/spotify/umapv1/" title="Improving Spotify with UMAP v1">Improving Spotify with UMAP v1</a></li>
  

  
  
  
  
  
    
    <li><a class="" href="/posts/projects/spotify/top50v1/" title="Top 50 playlist with python v1">Top 50 playlist with python v1</a></li>
  


      </ul>
    </li>
  


      </ul>
    </li>
  


            </div>
          </ul>
        </div>
      </div>
    </div>
  </section>


      
      
<section class="content-section" id="content-section">
  <div class="content">
    <div class="container p-0 read-area">
      
      <div class="hero-area col-sm-12" id="hero-area" style='background-image: url(/posts/projects/spotify/umapv1/images/header.jpg);'>
      </div>

      
      <div class="page-content">
        <div class="author-profile ml-auto align-self-lg-center">
          <img class="rounded-circle" src='/images/author/Jose_hu5456ba4630f243deb6333089c716b61c_18302_120x120_fit_q75_box.jpeg' alt="Author Image">
          <h5 class="author-name">José Verdú-Díaz</h5>
          <p>Saturday, January 7, 2023</p>
        </div>

        <div class="title">
          <h1>Improving Spotify with UMAP v1</h1>
        </div>
        
        <div class="taxonomy-terms">
          <ul style="padding-left: 0;">
            
            
            <li class="rounded"><a href="/tags/markdown/" class="btn, btn-sm">Markdown</a></li>
            
            
            <li class="rounded"><a href="/tags/content-organization/" class="btn, btn-sm">Content Organization</a></li>
            
            
            <li class="rounded"><a href="/tags/multi-lingual/" class="btn, btn-sm">Multi-lingual</a></li>
            
          </ul>
        </div>
        
        <div class="post-content" id="post-content">
          

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<p>I&rsquo;m the kind of Spotify user that adds every single song to one single playlist and then complains about not being able to find what he wants to hear. One simple solution would be grouping songs in different playlists by mood, however, this solution is not exciting enough for me&hellip; Instead, I decided to create an app that takes all tracks in a playlist, &ldquo;analyzes&rdquo; and groups them by similarity in an interactive 3D graph, where you can click on a song and automatically play it on Spotify. Ok, maybe that was too much to digest, let&rsquo;s decompose the problem:</p>
<ul>
<li><strong>Getting all tracks of a Spotify playlist</strong>: Spotify offers an amazing <a href="https://developer.spotify.com/documentation/web-api/" target="_blank" rel="noopener">Web API</a> with an endpoint for requesting a list of tracks for a given playlist.</li>
<li><strong>Analyze the tracks</strong>: I might have lied here&hellip; we are not going to analyze and extract the features of the songs, as Spotify does not give access to the audio data. Instead, Spotify generates a set of song features using their &#x2728;<em>Corporate Secrets</em>&#x2728; which are accessible with the Web API.</li>
<li><strong>Grouping tracks by similarity</strong>: To group similar songs we will follow a <a href="https://en.wikipedia.org/wiki/Dimensionality_reduction" target="_blank" rel="noopener"><strong>dimensionality reduction</strong></a> strategy using the <a href="https://en.wikipedia.org/wiki/Dimensionality_reduction" target="_blank" rel="noopener">UMAP</a> technique. We will use <a href="https://plotly.com/python/" target="_blank" rel="noopener">Plotly</a> to create a 3D interactive graph of the UMAP result that will allow us to select individual songs.</li>
<li><strong>Playing selected songs in Spotify</strong>: We will use, again, the Spotify Web API to play the song we select in the Plotly graph.</li>
</ul>
<p>&#x2757; Before moving forward: if you are planning to reproduce this project you might need a <strong>premium Spotify account</strong> to perform some of the API requests. Also, this project assumes you have an intermediate understanding of python, packet managing and other concepts.</p>
<p>With that being said, let&rsquo;s dive in!</p>
<hr>
<h2 id="setting-up-the-spotify-web-api-requirements">Setting up the Spotify Web API requirements</h2>
<p>The Web API requests require <strong>authentication</strong> with an <a href="https://oauth.net/" target="_blank" rel="noopener">OAuth</a> access token. To obtain a token we first need to log in to <a href="https://developer.spotify.com/dashboard/" target="_blank" rel="noopener">Spotify for Developers Dashboard</a>:</p>
<p><img src="images/1.png" alt=""></p>
<p>Once we are logged in, we will click on &ldquo;create an app&rdquo; and a form will appear. We will give an awesome name and an awesome description to our app, and we will accept the Developer Terms of Service and Branding Guidelines after fully reading them &#x1f440;.</p>
<p><img src="images/2.png" alt=""></p>
<p><img src="images/3.png" alt=""></p>
<p>After accepting we will be redirected to the app&rsquo;s dashboard. There we will be able to find the <code>Client ID</code> and <code>Client Secret</code>. Note that both are blurred out, <strong>you shouldn&rsquo;t share these values anywhere!</strong> &#x1f64a;</p>
<p><img src="images/4.png" alt=""></p>
<p>Write these values in a json file named <code>credentials.json</code>. If you are using git with your code and uploading the repository anywhere (GitHub, for example) <strong>add the json file to the <code>.gitignore</code>!</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;CLIENT_ID&#34;</span>: <span style="color:#e6db74">&#34;123456789abcdefghijklmnopqrstuvw&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&#34;CLIENT_SECRET&#34;</span>: <span style="color:#e6db74">&#34;123456789abcdefghijklmnopqrstuvw&#34;</span>
</span></span><span style="display:flex;"><span>}</span></span></code></pre></div>
<p>Click the &ldquo;EDIT SETTINGS&rdquo; button in the dashboard and add the following redirect URI: <code>https://www.google.com/</code>. This will be used during the authentication process.</p>
<p><img src="images/5.png" alt=""></p>
<p>With this done, we finished setting up the requirements for the Web API.</p>
<hr>
<h2 id="authenticating">Authenticating</h2>
<p>First of all, we will load the credentials we stored before:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;credentials.json&#39;</span>, <span style="color:#e6db74">&#39;r&#39;</span>) <span style="color:#66d9ef">as</span> f: credentials <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>load(f)
</span></span><span style="display:flex;"><span>CLIENT_ID <span style="color:#f92672">=</span> credentials[<span style="color:#e6db74">&#39;CLIENT_ID&#39;</span>]
</span></span><span style="display:flex;"><span>CLIENT_SECRET <span style="color:#f92672">=</span> credentials[<span style="color:#e6db74">&#39;CLIENT_SECRET&#39;</span>]</span></span></code></pre></div>
<p>We will use <a href="https://spotipy.readthedocs.io" target="_blank" rel="noopener">spotipy</a>, a library that makes interacting with the API simpler. We define a <code>Spotify</code> object as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> spotipy <span style="color:#66d9ef">as</span> spt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>SCOPE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;user-modify-playback-state user-library-read user-read-email user-read-private user-top-read user-modify-playback-state user-read-playback-state&#39;</span>
</span></span><span style="display:flex;"><span>REDIRECT_URI <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;https://www.google.com/&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>auth <span style="color:#f92672">=</span> spt<span style="color:#f92672">.</span>SpotifyOAuth(
</span></span><span style="display:flex;"><span>    client_id<span style="color:#f92672">=</span>CLIENT_ID, client_secret<span style="color:#f92672">=</span>CLIENT_SECRET, 
</span></span><span style="display:flex;"><span>    redirect_uri<span style="color:#f92672">=</span>REDIRECT_URI, 
</span></span><span style="display:flex;"><span>    scope<span style="color:#f92672">=</span>SCOPE, open_browser<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, cache_path<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;.cache&#39;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>spotify <span style="color:#f92672">=</span> spt<span style="color:#f92672">.</span>Spotify(oauth_manager<span style="color:#f92672">=</span>auth)</span></span></code></pre></div>
<p>The first time you perform a request using the <code>spotify</code> you will be requested to authenticate and a token will be generated. This token will be saved in the file specified in <code>cache_path</code> (in our case, in <code>.cache</code>). Again, if you are using git with your code and uploading the repository anywhere (GitHub, for example) <strong>add the cache file to the <code>.gitignore</code>!</strong> This authentication will happen only once, as spotipy takes care of refreshing the token when necessary.</p>
<p>The authentication process is simple: a web browser will be opened and we will copy the URL where we are redirected and paste it into an input box. Depending on your system, IDE or default browser&hellip; this process can fail. In my case, running the code from a <code>.ipynb</code> file in VS Code fails. To solve it, I run the code from a <code>.py</code> once.</p>
<p>Let&rsquo;s trigger the authentication process by performing a request:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>spotify<span style="color:#f92672">.</span>track(<span style="color:#e6db74">&#39;4cOdK2wGLETKBW3PvgPWqT&#39;</span>)</span></span></code></pre></div>
<p>Done! Now you won&rsquo;t have to worry about authentication ever again!</p>
<hr>
<h2 id="obtaining-data">Obtaining data</h2>
<p>First of all, we need to choose a playlist and get its URI. To do so, go to Spotify and choose a playlist, click on the &ldquo;three dots&rdquo; &gt; Share &gt; Copy Spotify URI. You might need to press the CTRL key for this option to appear.</p>
<p><img src="images/6.png" alt=""></p>
<p>Save the URI in a variable as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>PLAYLIST_ID <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;7fE2CHD6t7eeHLD2ar8zSL&#39;</span></span></span></code></pre></div>
<p>We will use my persona Hip Hop playlist, which contains a huge variety of sub-styles from the old and new schools in the United States, Latin America and Spain. The playlist has a total 2517 tracks (at the moment of creating this blog post), so it should offer a nice amount of data points to work with.</p>
<p>Then we will construct a pandas DataFrame with the audio features and basic information of all tracks in the playlist:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> pandas <span style="color:#66d9ef">as</span> pd
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> tqdm <span style="color:#f92672">import</span> tqdm
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>d <span style="color:#f92672">=</span> spotify<span style="color:#f92672">.</span>playlist_items(playlist_id<span style="color:#f92672">=</span>PLAYLIST_ID, limit<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>n <span style="color:#f92672">=</span> math<span style="color:#f92672">.</span>ceil(d[<span style="color:#e6db74">&#39;total&#39;</span>] <span style="color:#f92672">/</span> <span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> item <span style="color:#f92672">in</span> tqdm(d[<span style="color:#e6db74">&#39;items&#39;</span>], postfix<span style="color:#f92672">=</span><span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;Request </span><span style="color:#e6db74">{</span>i<span style="color:#e6db74">}</span><span style="color:#e6db74"> of </span><span style="color:#e6db74">{</span>n<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>):
</span></span><span style="display:flex;"><span>        track <span style="color:#f92672">=</span> item[<span style="color:#e6db74">&#39;track&#39;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        f <span style="color:#f92672">=</span> spotify<span style="color:#f92672">.</span>audio_features(tracks<span style="color:#f92672">=</span>track[<span style="color:#e6db74">&#39;id&#39;</span>])[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> f <span style="color:#f92672">==</span> <span style="color:#66d9ef">None</span>: <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        features <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;danceability&#39;</span>: f[<span style="color:#e6db74">&#39;danceability&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;energy&#39;</span>: f[<span style="color:#e6db74">&#39;energy&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;key&#39;</span>: f[<span style="color:#e6db74">&#39;key&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;loudness&#39;</span>: f[<span style="color:#e6db74">&#39;loudness&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;mode&#39;</span>: f[<span style="color:#e6db74">&#39;mode&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;speechiness&#39;</span>: f[<span style="color:#e6db74">&#39;speechiness&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;acousticness&#39;</span>: f[<span style="color:#e6db74">&#39;acousticness&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;instrumentalness&#39;</span>: f[<span style="color:#e6db74">&#39;instrumentalness&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;liveness&#39;</span>: f[<span style="color:#e6db74">&#39;liveness&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;valence&#39;</span>: f[<span style="color:#e6db74">&#39;valence&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;tempo&#39;</span>: f[<span style="color:#e6db74">&#39;tempo&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;track_name&#39;</span>: track[<span style="color:#e6db74">&#39;name&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;artists_names&#39;</span>: [],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;album_name&#39;</span>: track[<span style="color:#e6db74">&#39;album&#39;</span>][<span style="color:#e6db74">&#39;name&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;release_date&#39;</span>: track[<span style="color:#e6db74">&#39;album&#39;</span>][<span style="color:#e6db74">&#39;release_date&#39;</span>],
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;track_id&#39;</span>: track[<span style="color:#e6db74">&#39;id&#39;</span>],
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> a <span style="color:#f92672">in</span> track[<span style="color:#e6db74">&#39;artists&#39;</span>]: features[<span style="color:#e6db74">&#39;artists_names&#39;</span>]<span style="color:#f92672">.</span>append(a[<span style="color:#e6db74">&#39;name&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        data<span style="color:#f92672">.</span>append(features)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    d <span style="color:#f92672">=</span> spotify<span style="color:#f92672">.</span>playlist_items(playlist_id<span style="color:#f92672">=</span>PLAYLIST_ID, limit<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>, offset<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span><span style="color:#f92672">*</span>i)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(data)</span></span></code></pre></div>
<p>Woah! That&rsquo;s a fair chunk to digest, let&rsquo;s explain it a little bit. The Spotify API request for retrieving tracks from a playlist has a maximum of 50 tracks. However, it has an <code>offset</code> parameter that allows us to change which is the first song requested. Using this little trick, we can calculate how many requests we need to download the full playlist! Note that I&rsquo;m using <a href="https://tqdm.github.io/" target="_blank" rel="noopener">tqdm</a> for printing some progress bars.</p>
<p>For each track, we save the following audio features:</p>
<ul>
<li><strong>Danceability</strong>: A confidence measure from 0.0 to 1.0 of whether the track is acoustic. 1.0 represents high confidence the track is acoustic.</li>
<li><strong>Energy</strong>: A measure from 0.0 to 1.0 that represents a perceptual measure of intensity and activity. Typically, energetic tracks feel fast, loud, and noisy. For example, death metal has high energy, while a Bach prelude scores low on the scale. Perceptual features contributing to this attribute include dynamic range, perceived loudness, timbre, onset rate, and general entropy.</li>
<li><strong>Key</strong>: The key the track is in. Integers map to pitches using standard Pitch Class notation. E.g. 0 = C, 1 = C♯/D♭, 2 = D, and so on. If no key was detected, the value is -1.</li>
<li><strong>Loudness</strong>: The overall loudness of a track in decibels (dB). Loudness values are averaged across the entire track and are useful for comparing the relative loudness of tracks. Loudness is the quality of a sound that is the primary psychological correlate of physical strength (amplitude). Values typically range between -60 and 0 db.</li>
<li><strong>Mode</strong>: Indicates the modality (major or minor) of a track, the type of scale from which its melodic content is derived. Major is represented by 1 and minor is 0.</li>
<li><strong>Speechiness</strong>: Detects the presence of spoken words in a track. The more exclusively speech-like the recording (e.g. talk show, audio book, poetry), the closer to 1.0 the attribute value. Values above 0.66 describe tracks that are probably made entirely of spoken words. Values between 0.33 and 0.66 describe tracks that may contain both music and speech, either in sections or layered, including such cases as rap music. Values below 0.33 most likely represent music and other non-speech-like tracks.</li>
<li><strong>Acousticness</strong>: A confidence measure from 0.0 to 1.0 of whether the track is acoustic. 1.0 represents high confidence the track is acoustic.</li>
<li><strong>Instrumentalness</strong>: Predicts whether a track contains no vocals. &ldquo;Ooh&rdquo; and &ldquo;aah&rdquo; sounds are treated as instrumental in this context. Rap or spoken word tracks are clearly &ldquo;vocal&rdquo;. The closer the instrumentalness value is to 1.0, the greater likelihood the track contains no vocal content. Values above 0.5 are intended to represent instrumental tracks, but confidence is higher as the value approaches 1.0.</li>
<li><strong>Liveness</strong>: Detects the presence of an audience in the recording. Higher liveness values represent an increased probability that the track was performed live. A value above 0.8 provides a strong likelihood that the track is live.</li>
<li><strong>Valence</strong>: A measure from 0.0 to 1.0 describing the musical positiveness conveyed by a track. Tracks with high valence sound more positive (e.g. happy, cheerful, euphoric), while tracks with low valence sound more negative (e.g. sad, depressed, angry).</li>
<li><strong>Tempo</strong>: The overall estimated tempo of a track in beats per minute (BPM). In musical terminology, the tempo is the speed or pace of a given piece and derives directly from the average beat duration.</li>
</ul>
<p>Note that I copied these descriptions from the <a href="https://developer.spotify.com/documentation/web-api/reference/#/operations/get-several-audio-features" target="_blank" rel="noopener">API reference</a>. We also include other information: the track name, a list of artists&rsquo; names, the album name, the release date and the track URI (the latter is a surprise tool that will help us later).</p>
<p><img src="images/7.png" alt=""></p>
<p>The downloading of the tracks can take a while (especially for large playlists), so it is interesting to save the data into a csv:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df<span style="color:#f92672">.</span>to_csv(<span style="color:#e6db74">&#39;data.csv&#39;</span>, index<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)</span></span></code></pre></div>
<p>The next time we what to run the code, it will be enough to load the csv:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;data.csv&#39;</span>)</span></span></code></pre></div>
<hr>
<h2 id="exploratory-data-analysis">Exploratory Data Analysis</h2>
<p>Ok, we already have the data, can we jump straight into grouping them with UMAP? <strong>NO!</strong> Let&rsquo;s have some fun with some exploratory data analysis first, we might get some interesting insights. I will use <a href="https://plotly.com/python/getting-started/" target="_blank" rel="noopener">Plotly</a> for plotting, as it allows me to generate interactive plots that can be inserted into this blog, but feel free to use your favorite library!</p>
<p>Let&rsquo;s visualize the distribution of the different features. Some features are bounded between 0 and 1, while others are unbounded. For this reason, I will separate the into different subplots.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> plotly.graph_objects <span style="color:#66d9ef">as</span> go
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> plotly.subplots <span style="color:#f92672">import</span> make_subplots
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>features, values, track_name <span style="color:#f92672">=</span> [], [], []
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> c <span style="color:#f92672">in</span> list(df<span style="color:#f92672">.</span>loc[:,:<span style="color:#e6db74">&#39;tempo&#39;</span>]<span style="color:#f92672">.</span>columns):
</span></span><span style="display:flex;"><span>    features<span style="color:#f92672">.</span>extend([c <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(len(df))])
</span></span><span style="display:flex;"><span>    values<span style="color:#f92672">.</span>extend(list(df[c]))
</span></span><span style="display:flex;"><span>    track_name<span style="color:#f92672">.</span>extend(list(df[<span style="color:#e6db74">&#39;track_name&#39;</span>]))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>outlier_df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(list(zip(features, values, track_name)), columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;features&#39;</span>, <span style="color:#e6db74">&#39;values&#39;</span>, <span style="color:#e6db74">&#39;track_name&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>outlier_df_0 <span style="color:#f92672">=</span> outlier_df<span style="color:#f92672">.</span>loc[
</span></span><span style="display:flex;"><span>    (outlier_df[<span style="color:#e6db74">&#39;features&#39;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;tempo&#39;</span>) <span style="color:#f92672">&amp;</span> 
</span></span><span style="display:flex;"><span>    (outlier_df[<span style="color:#e6db74">&#39;features&#39;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;loudness&#39;</span>) <span style="color:#f92672">&amp;</span>
</span></span><span style="display:flex;"><span>    (outlier_df[<span style="color:#e6db74">&#39;features&#39;</span>] <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;key&#39;</span>)
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>outlier_df_1 <span style="color:#f92672">=</span> outlier_df<span style="color:#f92672">.</span>loc[(outlier_df[<span style="color:#e6db74">&#39;features&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;tempo&#39;</span>)]
</span></span><span style="display:flex;"><span>outlier_df_2 <span style="color:#f92672">=</span> outlier_df<span style="color:#f92672">.</span>loc[(outlier_df[<span style="color:#e6db74">&#39;features&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;loudness&#39;</span>)]
</span></span><span style="display:flex;"><span>outlier_df_3 <span style="color:#f92672">=</span> outlier_df<span style="color:#f92672">.</span>loc[(outlier_df[<span style="color:#e6db74">&#39;features&#39;</span>] <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;key&#39;</span>)]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> make_subplots(rows<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, cols<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>, column_widths<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0.7</span>, <span style="color:#ae81ff">0.1</span>, <span style="color:#ae81ff">0.1</span>, <span style="color:#ae81ff">0.1</span>])
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>add_trace(
</span></span><span style="display:flex;"><span>    go<span style="color:#f92672">.</span>Box(x<span style="color:#f92672">=</span>outlier_df_0[<span style="color:#e6db74">&#39;features&#39;</span>], y<span style="color:#f92672">=</span>outlier_df_0[<span style="color:#e6db74">&#39;values&#39;</span>], hovertext <span style="color:#f92672">=</span> list(outlier_df_0[<span style="color:#e6db74">&#39;track_name&#39;</span>]), boxpoints<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;all&#39;</span>),
</span></span><span style="display:flex;"><span>    row<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, col<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>add_trace(
</span></span><span style="display:flex;"><span>    go<span style="color:#f92672">.</span>Box(x<span style="color:#f92672">=</span>outlier_df_1[<span style="color:#e6db74">&#39;features&#39;</span>], y<span style="color:#f92672">=</span>outlier_df_1[<span style="color:#e6db74">&#39;values&#39;</span>], hovertext <span style="color:#f92672">=</span> list(outlier_df_0[<span style="color:#e6db74">&#39;track_name&#39;</span>]), boxpoints<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;all&#39;</span>),
</span></span><span style="display:flex;"><span>    row<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, col<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>add_trace(
</span></span><span style="display:flex;"><span>    go<span style="color:#f92672">.</span>Box(x<span style="color:#f92672">=</span>outlier_df_2[<span style="color:#e6db74">&#39;features&#39;</span>], y<span style="color:#f92672">=</span>outlier_df_2[<span style="color:#e6db74">&#39;values&#39;</span>], hovertext <span style="color:#f92672">=</span> list(outlier_df_0[<span style="color:#e6db74">&#39;track_name&#39;</span>]), boxpoints<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;all&#39;</span>),
</span></span><span style="display:flex;"><span>    row<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, col<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>add_trace(
</span></span><span style="display:flex;"><span>    go<span style="color:#f92672">.</span>Box(x<span style="color:#f92672">=</span>outlier_df_3[<span style="color:#e6db74">&#39;features&#39;</span>], y<span style="color:#f92672">=</span>outlier_df_3[<span style="color:#e6db74">&#39;values&#39;</span>], hovertext <span style="color:#f92672">=</span> list(outlier_df_0[<span style="color:#e6db74">&#39;track_name&#39;</span>]), boxpoints<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;all&#39;</span>),
</span></span><span style="display:flex;"><span>    row<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, col<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>update_layout(height<span style="color:#f92672">=</span><span style="color:#ae81ff">700</span>, showlegend<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>show()</span></span></code></pre></div>


<div id="plotly/features_box.json" class="plotly" style="height:700px"></div>
<script>
Plotly.d3.json("plotly/features_box.json", function(err, fig) {
    Plotly.plot('plotly\/features_box.json', fig.data, fig.layout, {responsive: true});
});
</script>
<p>First of all, one thing that pops up is how high the tempo values get: the song with the highest tempo (&ldquo;93 till&rsquo; Infinity&rdquo; by Souls of Mischief) has around 206 BPM! This is an incredibly fast tempo for a Hip Hop song &#x1f615;. Let&rsquo;s investigate further using this <a href="https://songbpm.com/" target="_blank" rel="noopener">webpage</a>.</p>
<p><img src="images/8.png" alt=""></p>
<p>The instrumental version of the track has exactly half the BPM (which is, actually, the correct BPM). However, when performing a qualitative analysis (listening to the track) we can hear lots of rhythmic elements which give the sensation of a double-tempo. The conclusion is that, while the tempo metric might not be accurate, it&rsquo;s not perceptually wrong.</p>
<p>Another interesting relation to study is how loudness has increased over the years. In music production, the <a href="https://en.wikipedia.org/wiki/Loudness_war" target="_blank" rel="noopener">Loudness War</a> explains how the audio level tends to increase over the years to give the consumer a false sensation of &ldquo;better sounding&rdquo;. Let&rsquo;s see if we can observe this in our data!</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>year <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(df)):
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;release_date&#39;</span>][i]<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;-&#39;</span>)[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> y <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;0000&#39;</span>: y <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;2000&#39;</span> <span style="color:#75715e"># Dirty NaN imputing</span>
</span></span><span style="display:flex;"><span>    year<span style="color:#f92672">.</span>append(y)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;year&#39;</span>] <span style="color:#f92672">=</span> year
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>year_mean_df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;year&#39;</span>, as_index<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)<span style="color:#f92672">.</span>mean()
</span></span><span style="display:flex;"><span>year_min_df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;year&#39;</span>, as_index<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)<span style="color:#f92672">.</span>min()
</span></span><span style="display:flex;"><span>year_max_df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;year&#39;</span>, as_index<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)<span style="color:#f92672">.</span>max()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> list(year_mean_df[<span style="color:#e6db74">&#39;year&#39;</span>])
</span></span><span style="display:flex;"><span>x_rev <span style="color:#f92672">=</span> x[::<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>mean <span style="color:#f92672">=</span> list(year_mean_df[<span style="color:#e6db74">&#39;loudness&#39;</span>])
</span></span><span style="display:flex;"><span>upper <span style="color:#f92672">=</span> list(year_max_df[<span style="color:#e6db74">&#39;loudness&#39;</span>])
</span></span><span style="display:flex;"><span>lower <span style="color:#f92672">=</span> list(year_min_df[<span style="color:#e6db74">&#39;loudness&#39;</span>])
</span></span><span style="display:flex;"><span>lower <span style="color:#f92672">=</span> lower[::<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Figure()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>add_trace(go<span style="color:#f92672">.</span>Scatter(
</span></span><span style="display:flex;"><span>    x<span style="color:#f92672">=</span>x<span style="color:#f92672">+</span>x_rev,
</span></span><span style="display:flex;"><span>    y<span style="color:#f92672">=</span>upper<span style="color:#f92672">+</span>lower,
</span></span><span style="display:flex;"><span>    fill<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;toself&#39;</span>,
</span></span><span style="display:flex;"><span>    fillcolor<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;rgba(0,100,80,0.2)&#39;</span>,
</span></span><span style="display:flex;"><span>    line_color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;rgba(255,255,255,0)&#39;</span>,
</span></span><span style="display:flex;"><span>    showlegend<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>
</span></span><span style="display:flex;"><span>))
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>add_trace(go<span style="color:#f92672">.</span>Scatter(
</span></span><span style="display:flex;"><span>    x<span style="color:#f92672">=</span>x, y<span style="color:#f92672">=</span>mean,
</span></span><span style="display:flex;"><span>    line_color<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;rgb(0,100,80)&#39;</span>
</span></span><span style="display:flex;"><span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>update_traces(mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lines&#39;</span>, showlegend<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>fig[<span style="color:#e6db74">&#39;layout&#39;</span>]<span style="color:#f92672">.</span>update(height<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, autosize<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>show()</span></span></code></pre></div>


<div id="plotly/loudness.json" class="plotly" style="height:800px"></div>
<script>
Plotly.d3.json("plotly/loudness.json", function(err, fig) {
    Plotly.plot('plotly\/loudness.json', fig.data, fig.layout, {responsive: true});
});
</script>
<p>We can observe this tendency in our data too, with a clear increase from 1992 peaking in 2006. After this year, we observe how the loudness tends to fall again. This coincides with the decrease in popularity of the CD in favor of digital formats and streaming services, which make use of standardization techniques that makes pumping up the audio level unnecessary, as explained by this <a href="https://www.mixonline.com/news/loudness-war-over-420885" target="_blank" rel="noopener">article</a>.</p>
<p>Finally, let&rsquo;s have a look at the correlation matrix of the variables.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> numpy <span style="color:#66d9ef">as</span> np
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> plotly.figure_factory <span style="color:#66d9ef">as</span> ff
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df_corr <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>loc[:,:<span style="color:#e6db74">&#39;tempo&#39;</span>]<span style="color:#f92672">.</span>corr()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>x <span style="color:#f92672">=</span> list(df_corr<span style="color:#f92672">.</span>columns)
</span></span><span style="display:flex;"><span>y <span style="color:#f92672">=</span> list(df_corr<span style="color:#f92672">.</span>index)
</span></span><span style="display:flex;"><span>z <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>array(df_corr)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> ff<span style="color:#f92672">.</span>create_annotated_heatmap(
</span></span><span style="display:flex;"><span>    z,
</span></span><span style="display:flex;"><span>    x <span style="color:#f92672">=</span> x,
</span></span><span style="display:flex;"><span>    y <span style="color:#f92672">=</span> y ,
</span></span><span style="display:flex;"><span>    annotation_text <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>around(z, decimals<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>),
</span></span><span style="display:flex;"><span>    hoverinfo<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;z&#39;</span>,
</span></span><span style="display:flex;"><span>    colorscale<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;thermal&#39;</span>
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>fig[<span style="color:#e6db74">&#39;layout&#39;</span>]<span style="color:#f92672">.</span>update(height<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>show()</span></span></code></pre></div>


<div id="plotly/correlation.json" class="plotly" style="height:800px"></div>
<script>
Plotly.d3.json("plotly/correlation.json", function(err, fig) {
    Plotly.plot('plotly\/correlation.json', fig.data, fig.layout, {responsive: true});
});
</script>
<p>We can see a strong positive correlation between loudness and energy. Other than that, the heatmap does not reveal much more.</p>
<hr>
<h2 id="umap">UMAP</h2>
<p>That is enough analysis for today, let&rsquo;s return to the objective of the post!</p>
<p>Before applying the UMAP we should normalize all features to the same range. There are many sophisticated ways of doing so to take into account outliers, but given the nature of our data let&rsquo;s go simple: the <code>minmax_scale</code> of <code>sklearn</code> will do.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> sklearn.preprocessing <span style="color:#f92672">import</span> minmax_scale
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>scaled <span style="color:#f92672">=</span> minmax_scale(df<span style="color:#f92672">.</span>loc[:,:<span style="color:#e6db74">&#39;tempo&#39;</span>])
</span></span><span style="display:flex;"><span>scaled <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(scaled, columns<span style="color:#f92672">=</span>list(df<span style="color:#f92672">.</span>loc[:,:<span style="color:#e6db74">&#39;tempo&#39;</span>]<span style="color:#f92672">.</span>columns))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>df_scaled <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>copy()
</span></span><span style="display:flex;"><span>df_scaled<span style="color:#f92672">.</span>loc[:,:<span style="color:#e6db74">&#39;tempo&#39;</span>] <span style="color:#f92672">=</span> scaled</span></span></code></pre></div>
<p>Let&rsquo;s give a look to the new data:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> plotly.express <span style="color:#66d9ef">as</span> px
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>features, values, track_name <span style="color:#f92672">=</span> [], [], []
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> c <span style="color:#f92672">in</span> list(df_scaled<span style="color:#f92672">.</span>loc[:,:<span style="color:#e6db74">&#39;tempo&#39;</span>]<span style="color:#f92672">.</span>columns):
</span></span><span style="display:flex;"><span>    features<span style="color:#f92672">.</span>extend([c <span style="color:#66d9ef">for</span> _ <span style="color:#f92672">in</span> range(len(df_scaled))])
</span></span><span style="display:flex;"><span>    values<span style="color:#f92672">.</span>extend(list(df_scaled[c]))
</span></span><span style="display:flex;"><span>    track_name<span style="color:#f92672">.</span>extend(list(df_scaled[<span style="color:#e6db74">&#39;track_name&#39;</span>]))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>outlier_df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(list(zip(features, values, track_name)), columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;features&#39;</span>, <span style="color:#e6db74">&#39;values&#39;</span>, <span style="color:#e6db74">&#39;track_name&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig <span style="color:#f92672">=</span> px<span style="color:#f92672">.</span>box(outlier_df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;features&#34;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;values&#34;</span>, points<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;all&#34;</span>, hover_data<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;track_name&#39;</span>])
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>show()</span></span></code></pre></div>


<div id="plotly/normalized.json" class="plotly" style="height:800px"></div>
<script>
Plotly.d3.json("plotly/normalized.json", function(err, fig) {
    Plotly.plot('plotly\/normalized.json', fig.data, fig.layout, {responsive: true});
});
</script>
<p>This looks a lot better! Don&rsquo;t hesitate to try different techniques, as this could be improved further. Now it&rsquo;s time to apply the UMAP to the data:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> umap <span style="color:#f92672">import</span> UMAP
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>umap <span style="color:#f92672">=</span> UMAP(n_components<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>proj_3d <span style="color:#f92672">=</span> umap<span style="color:#f92672">.</span>fit_transform(df_scaled<span style="color:#f92672">.</span>loc[:,:<span style="color:#e6db74">&#39;tempo&#39;</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>proj_3d_df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(proj_3d, columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;0&#39;</span>, <span style="color:#e6db74">&#39;1&#39;</span>, <span style="color:#e6db74">&#39;2&#39;</span>])
</span></span><span style="display:flex;"><span>proj_3d_df[<span style="color:#e6db74">&#39;track_name&#39;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;track_name&#39;</span>]</span></span></code></pre></div>
<p>And now, the moment of truth&hellip; Let&rsquo;s plot our UMAP:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>f <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>FigureWidget()
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">.</span>add_trace(go<span style="color:#f92672">.</span>Scatter3d(
</span></span><span style="display:flex;"><span>    x<span style="color:#f92672">=</span>proj_3d[:,<span style="color:#ae81ff">0</span>], y<span style="color:#f92672">=</span>proj_3d[:,<span style="color:#ae81ff">1</span>], z<span style="color:#f92672">=</span>proj_3d[:,<span style="color:#ae81ff">2</span>],
</span></span><span style="display:flex;"><span>    mode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;markers&#39;</span>,
</span></span><span style="display:flex;"><span>    hovertext <span style="color:#f92672">=</span> list(proj_3d_df[<span style="color:#e6db74">&#39;track_name&#39;</span>])
</span></span><span style="display:flex;"><span>    ))
</span></span><span style="display:flex;"><span>f[<span style="color:#e6db74">&#39;layout&#39;</span>]<span style="color:#f92672">.</span>update(width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, autosize<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">.</span>for_each_trace(<span style="color:#66d9ef">lambda</span> t: t<span style="color:#f92672">.</span>update({<span style="color:#e6db74">&#34;marker&#34;</span>:{<span style="color:#e6db74">&#34;size&#34;</span>:<span style="color:#ae81ff">1</span>}}))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">click_callback</span>(trace, points, selector):
</span></span><span style="display:flex;"><span>    track <span style="color:#f92672">=</span> data[points<span style="color:#f92672">.</span>point_inds[<span style="color:#ae81ff">0</span>]]
</span></span><span style="display:flex;"><span>    spotify<span style="color:#f92672">.</span>add_to_queue(uri<span style="color:#f92672">=</span>track[<span style="color:#e6db74">&#39;track_id&#39;</span>])
</span></span><span style="display:flex;"><span>    spotify<span style="color:#f92672">.</span>next_track()
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;Song: </span><span style="color:#e6db74">{</span>track[<span style="color:#e6db74">&#34;track_name&#34;</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74"> | URI: </span><span style="color:#e6db74">{</span>track[<span style="color:#e6db74">&#34;track_id&#34;</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>f<span style="color:#f92672">.</span>data[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>on_click(click_callback)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>f</span></span></code></pre></div>


<div id="plotly/umap.json" class="plotly" style="height:800px"></div>
<script>
Plotly.d3.json("plotly/umap.json", function(err, fig) {
    Plotly.plot('plotly\/umap.json', fig.data, fig.layout, {responsive: true});
});
</script>
<p>That is fantastic! &#x1f60d; Did you notice that <code>click_callback</code> function? Here is where our surprise tool comes handy. We added a click event on each data point that sends a request to spotify to change the currently playing track to the one selected. Keep in mind that you need to have spotify opened and playing for it to work and that this functionality won&rsquo;t work with this blog&rsquo;s plot! Are you starting to see the potential of this idea? Then wait, because we are going to make another step forward!</p>
<hr>
<h2 id="clustering">Clustering</h2>
<p>Before going ahead, it&rsquo;s time for a quick disclaimer: the validity of UMAP as a preprocessing step for clustering is something that it is currently being discussed by the scientific community. Some papers (<a href="https://link.springer.com/chapter/10.1007/978-3-030-51935-3_34" target="_blank" rel="noopener">1</a>) claim to improve substantially the performance of multiple clustering algorithms by applying UMAP first. However, UMAP does not preserve distance nor density between data points, which can affect distance and density-based clustering algorithms (<a href="https://stats.stackexchange.com/questions/263539/clustering-on-the-output-of-t-sne" target="_blank" rel="noopener">2</a>). Having this said, let&rsquo;s move on!</p>
<p>We will use <a href="https://hdbscan.readthedocs.io/en/latest/index.html" target="_blank" rel="noopener">HDBSCAN</a>, which has proven to work very well with UMAP:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> hdbscan
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>labels <span style="color:#f92672">=</span> hdbscan<span style="color:#f92672">.</span>HDBSCAN(
</span></span><span style="display:flex;"><span>    min_samples<span style="color:#f92672">=</span><span style="color:#ae81ff">5</span>,
</span></span><span style="display:flex;"><span>    min_cluster_size<span style="color:#f92672">=</span><span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>    gen_min_span_tree<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,
</span></span><span style="display:flex;"><span>    cluster_selection_method<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;leaf&#39;</span>
</span></span><span style="display:flex;"><span>)<span style="color:#f92672">.</span>fit_predict(proj_3d)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> labels<span style="color:#f92672">.</span>min() <span style="color:#f92672">==</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>: labels <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>proj_3d_df[<span style="color:#e6db74">&#39;labels&#39;</span>] <span style="color:#f92672">=</span> list(labels)
</span></span><span style="display:flex;"><span>df[<span style="color:#e6db74">&#39;labels&#39;</span>] <span style="color:#f92672">=</span> list(labels)</span></span></code></pre></div>
<p>Let&rsquo;s plot the results:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> seaborn <span style="color:#66d9ef">as</span> sns
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>color_palette <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>color_palette(<span style="color:#e6db74">&#39;tab20&#39;</span>, n_colors<span style="color:#f92672">=</span>len(np<span style="color:#f92672">.</span>unique(labels)))
</span></span><span style="display:flex;"><span>color_palette[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> (<span style="color:#ae81ff">0.5</span>, <span style="color:#ae81ff">0.5</span>, <span style="color:#ae81ff">0.5</span>)
</span></span><span style="display:flex;"><span>colors <span style="color:#f92672">=</span> [<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;rgb(</span><span style="color:#e6db74">{</span>c[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">*</span><span style="color:#ae81ff">255</span><span style="color:#e6db74">}</span><span style="color:#e6db74">,</span><span style="color:#e6db74">{</span>c[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">*</span><span style="color:#ae81ff">255</span><span style="color:#e6db74">}</span><span style="color:#e6db74">,</span><span style="color:#e6db74">{</span>c[<span style="color:#ae81ff">2</span>]<span style="color:#f92672">*</span><span style="color:#ae81ff">255</span><span style="color:#e6db74">}</span><span style="color:#e6db74">)&#39;</span> <span style="color:#66d9ef">for</span> c <span style="color:#f92672">in</span> color_palette]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">=</span>go<span style="color:#f92672">.</span>FigureWidget()
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> list(np<span style="color:#f92672">.</span>unique(labels)):
</span></span><span style="display:flex;"><span>    dfp <span style="color:#f92672">=</span> proj_3d_df[proj_3d_df[<span style="color:#e6db74">&#39;labels&#39;</span>]<span style="color:#f92672">==</span>i]
</span></span><span style="display:flex;"><span>    fig<span style="color:#f92672">.</span>add_traces(go<span style="color:#f92672">.</span>Scatter3d(
</span></span><span style="display:flex;"><span>        x<span style="color:#f92672">=</span>dfp[<span style="color:#e6db74">&#39;0&#39;</span>], y<span style="color:#f92672">=</span>dfp[<span style="color:#e6db74">&#39;1&#39;</span>], z<span style="color:#f92672">=</span>dfp[<span style="color:#e6db74">&#39;2&#39;</span>],
</span></span><span style="display:flex;"><span>        mode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;markers&#39;</span>,
</span></span><span style="display:flex;"><span>        hovertext <span style="color:#f92672">=</span> list(dfp[<span style="color:#e6db74">&#39;track_name&#39;</span>]),
</span></span><span style="display:flex;"><span>        name<span style="color:#f92672">=</span><span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;</span><span style="color:#e6db74">{</span>i<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>,
</span></span><span style="display:flex;"><span>        marker_color<span style="color:#f92672">=</span>colors[i]
</span></span><span style="display:flex;"><span>    ))
</span></span><span style="display:flex;"><span>fig[<span style="color:#e6db74">&#39;layout&#39;</span>]<span style="color:#f92672">.</span>update(width<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, height<span style="color:#f92672">=</span><span style="color:#ae81ff">800</span>, autosize<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>fig<span style="color:#f92672">.</span>for_each_trace(<span style="color:#66d9ef">lambda</span> t: t<span style="color:#f92672">.</span>update({<span style="color:#e6db74">&#34;marker&#34;</span>:{<span style="color:#e6db74">&#34;size&#34;</span>:<span style="color:#ae81ff">2</span>}}))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">click_callback</span>(trace, points, selector):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> len(points<span style="color:#f92672">.</span>point_inds) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        dfp <span style="color:#f92672">=</span> df[df[<span style="color:#e6db74">&#39;labels&#39;</span>] <span style="color:#f92672">==</span> points<span style="color:#f92672">.</span>trace_index]
</span></span><span style="display:flex;"><span>        track <span style="color:#f92672">=</span> dfp<span style="color:#f92672">.</span>iloc[points<span style="color:#f92672">.</span>point_inds[<span style="color:#ae81ff">0</span>]]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        spotify<span style="color:#f92672">.</span>add_to_queue(uri<span style="color:#f92672">=</span>track[<span style="color:#e6db74">&#34;track_id&#34;</span>])
</span></span><span style="display:flex;"><span>        spotify<span style="color:#f92672">.</span>next_track()
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;Song: </span><span style="color:#e6db74">{</span>track[<span style="color:#e6db74">&#34;track_name&#34;</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74"> | URI: </span><span style="color:#e6db74">{</span>track[<span style="color:#e6db74">&#34;track_id&#34;</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> t <span style="color:#f92672">in</span> fig<span style="color:#f92672">.</span>data: t<span style="color:#f92672">.</span>on_click(click_callback)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fig</span></span></code></pre></div>


<div id="plotly/clusters.json" class="plotly" style="height:800px"></div>
<script>
Plotly.d3.json("plotly/clusters.json", function(err, fig) {
    Plotly.plot('plotly\/clusters.json', fig.data, fig.layout, {responsive: true});
});
</script>
<p>Not that bad! There are a lot of tracks that have been clustered as &ldquo;outliers&rdquo;. These are represented by the label &ldquo;0&rdquo;, and can be hidden by clicking the corresponding label in the legend.</p>
<hr>
<h2 id="to-do">To Do</h2>
<p>Thank you for reading this post! I think this is an idea with a lot of potential that needs improving and polishing. I might try in the future and write a new post about this, but in the meantime, these are some things you can try out!</p>
<ul>
<li>Try with your own playlists! The playlist we used only contains Hip Hop, so why not try a more variate one? Fill a playlist with Debussy and Skrillex and try again!</li>
<li>My standardization process was extremely basic, try more complex and specialized techniques, and the results might improve.</li>
<li>UMAP has multiple parameters that can be tweaked to improve the results, and I haven&rsquo;t bothered to experiment with them, why not try them out?</li>
<li>HDBSCAN also has multiple parameters to play with. I found good results with the ones I&rsquo;ve chosen, but I didn&rsquo;t do exhaustive research.</li>
<li>Include new features, or exclude existing features, in the analysis.</li>
</ul>
<p>See you at the next one!</p>

        </div>

        
        <div class="row pl-3 pr-3">
        
        <div class="col-md-6 share-buttons">
        
            <strong>Share on:</strong>
            
            <a class="btn btn-sm facebook-btn" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fJose-Verdu-Diaz.github.io%2fposts%2fprojects%2fspotify%2fumapv1%2f" target="_blank">
              <i class="fab fa-facebook"></i>
            </a>
            
            
                <a class="btn btn-sm twitter-btn" href="https://twitter.com/share?url=https%3a%2f%2fJose-Verdu-Diaz.github.io%2fposts%2fprojects%2fspotify%2fumapv1%2f&text=Improving%20Spotify%20with%20UMAP%20v1&via=Jose%20Verdu-Diaz" target="_blank">
                  <i class="fab fa-twitter"></i>
                </a>
            
            
                <a  class="btn btn-sm reddit-btn" href="https://reddit.com/submit?url=https%3a%2f%2fJose-Verdu-Diaz.github.io%2fposts%2fprojects%2fspotify%2fumapv1%2f&title=Improving%20Spotify%20with%20UMAP%20v1" target="_blank">
                  <i class="fab fa-reddit"></i>
                </a>
            
            
            
            
                <a class="btn btn-sm linkedin-btn" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fJose-Verdu-Diaz.github.io%2fposts%2fprojects%2fspotify%2fumapv1%2f&title=Improving%20Spotify%20with%20UMAP%20v1" target="_blank">
                  <i class="fab fa-linkedin"></i>
                </a>
            
            
             
            
                 <a class="btn btn-sm whatsapp-btn" href="https://api.whatsapp.com/send?text=Improving%20Spotify%20with%20UMAP%20v1 https%3a%2f%2fJose-Verdu-Diaz.github.io%2fposts%2fprojects%2fspotify%2fumapv1%2f" target="_blank">
                  <i class="fab fa-whatsapp"></i>
                </a>
            
            
                <a class="btn btn-sm email-btn" href="mailto:?subject=Improving%20Spotify%20with%20UMAP%20v1&body=https%3a%2f%2fJose-Verdu-Diaz.github.io%2fposts%2fprojects%2fspotify%2fumapv1%2f" target="_blank">
                  <i class="fas fa-envelope-open-text"></i>
                </a>
            
          
          </div>

        
        
          
            
          
          <div class="col-md-6 btn-improve-page">
             
               <a href="https://github.com/Jose-Verdu-Diaz/hugo-toha.github.io.git/edit/main/content/posts/projects/Spotify/UMAPv1/index.md" title="Improve this page" target="_blank" rel="noopener">
            
                <i class="fas fa-code-branch"></i>
                Improve this page
              </a>
          </div>
        
        </div>



      
      <hr />
        







  





  
    
    
  
  

  
  


<div class="row next-prev-navigator">
  
  
      
      
      <div class="col-md-12 next-article">
        <a href="/posts/projects/spotify/top50v1/" title="Top 50 playlist with python v1" class="btn btn-outline-info">
          <div>Next <i class="fas fa-chevron-circle-right"></i></div>
          <div class="next-prev-text">Top 50 playlist with python v1</div>
        </a>
      </div>
    
</div>

      <hr />

      
      

      
      

      </div>
    </div>
  </div>
  
  <a id="scroll-to-top" class="btn"><i class="fas fa-chevron-circle-up"></i></a>
  
</section>


      
      
  <section class="toc-section" id="toc-section">
    
    <div class="toc-holder">
      <h5 class="text-center pl-3">Table of Contents</h5>
      <hr>
      <div class="toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#setting-up-the-spotify-web-api-requirements">Setting up the Spotify Web API requirements</a></li>
    <li><a href="#authenticating">Authenticating</a></li>
    <li><a href="#obtaining-data">Obtaining data</a></li>
    <li><a href="#exploratory-data-analysis">Exploratory Data Analysis</a></li>
    <li><a href="#umap">UMAP</a></li>
    <li><a href="#clustering">Clustering</a></li>
    <li><a href="#to-do">To Do</a></li>
  </ul>
</nav>
      </div>
    </div>
    
  </section>

    </div>

    
    












  
  
    
  

  
  
    
  

  
  

  
  
    
    
      
    
  


  
  
  
    
  

  
  
  

  
  
  
    
  
  

  
  
  

  <footer id="footer" class="container-fluid text-center align-content-center footer pb-2">
    <div class="container pt-5">
      <div class="row text-left">
        
        <div class="col-md-4 col-sm-12">
          <h5>Navigation</h5>
          
          <ul>
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="https://Jose-Verdu-Diaz.github.io#about">About</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="https://Jose-Verdu-Diaz.github.io#skills">Skills</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="https://Jose-Verdu-Diaz.github.io#experiences">Experience</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="https://Jose-Verdu-Diaz.github.io#education">Education</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="https://Jose-Verdu-Diaz.github.io#projects">Projects</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="https://Jose-Verdu-Diaz.github.io#publications">Publications</a>
                </li>
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="https://Jose-Verdu-Diaz.github.io#recent-posts">Recent Posts</a>
                </li>
              
              
              
                
                
                  
                
                <li class="nav-item">
                  <a class="smooth-scroll" href="https://Jose-Verdu-Diaz.github.io#achievements">Achievements</a>
                </li>
              
            
              
            
          </ul>
          
        </div>
        
        
        <div class="col-md-4 col-sm-12">
          <h5>Contact me:</h5>
          <ul>
            
              
                <li><a href=mailto:jose.verdu-diaz2@newcastle.ac.uk target="_blank" rel="noopener">
                  <span><i class="fas fa-envelope"></i></span> <span>jose.verdu-diaz2@newcastle.ac.uk</span>
                </a></li>
              
            
              
                <li><a href=https://github.com/Jose-Verdu-Diaz target="_blank" rel="noopener">
                  <span><i class="fab fa-github"></i></span> <span>Jose-Verdu-Diaz</span>
                </a></li>
              
            
              
                <li><a href=https://www.linkedin.com/in/jos%c3%a9-verd%c3%ba-d%c3%adaz target="_blank" rel="noopener">
                  <span><i class="fab fa-linkedin"></i></span> <span>José Verdú-Díaz</span>
                </a></li>
              
            
          </ul>
        </div>
        
        
        
      </div>
    </div>
    
    <hr />
    <div class="container">
      <p id="disclaimer"><strong>Liability Notice:</strong> This theme is under MIT license. So, you can use it for non-commercial, commercial, or private uses. You can modify or distribute the theme without requiring any permission from the theme author. However, the theme author does not provide any warranty or takes any liability for any issue with the theme.</p>
    </div>
    
    
    <hr />
    <div class="container">
      <div class="row text-left">
        <div class="col-md-4">
          <a id="theme" href="https://github.com/hugo-toha/toha" target="_blank" rel="noopener">
            <img src="/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png" alt="Toha Theme Logo">
            Toha
          </a>
        </div>
        <div class="col-md-4 text-center">© 2023 Copyright.</div>
        <div class="col-md-4 text-right">
          <a id="hugo" href="https://gohugo.io/" target="_blank" rel="noopener">Powered by
          <img
            src="/images/hugo-logo.svg"
            alt="Hugo Logo"
            height="18"
          />
          </a>
        </div>
      </div>
    </div>
    
  </footer>


    <script src="/application.22b4bd8fddabcac25bb3e033b7d082dfb63477a56511ada2791f1828ce178228.js" integrity="sha256-IrS9j92rysJbs&#43;Azt9CC37Y0d6VlEa2ieR8YKM4Xgig=" defer></script>



    
     

    
    
        
        
        
        
                      
          <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="joseverdudiaz" data-description="Support me on Buy me a coffee!" data-message="Buy me a coffee!" data-color="#FFDD00" data-position="Right" data-x_margin="10" data-y_margin="18"></script>
        
        
    

</body>
</html>
